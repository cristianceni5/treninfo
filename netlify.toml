[build]
  command = "echo No build"
  publish = "."
  functions = "netlify/functions"

[dev]
  publish = "."
  functions = "netlify/functions"
  # Evita conflitti: Netlify usa 3999 di default per le Functions
  functionsPort = 9999

[functions]
  included_files = ["stazioni.json"]

# /api/* → /.netlify/functions/api (la function api gestisce già /api/...)
[[redirects]]
  from = "/api/*"
  to   = "/.netlify/functions/api/:splat"
  status = 200

[[redirects]]
  from = "/test-chiamate"
  to = "/404"
  status = 404
  force = false

[[redirects]]
  from = "/test-chiamate.html"
  to = "/404"
  status = 404
  force = false

# Non esporre il DB stazioni completo (contiene id interni usati solo dal backend)
[[redirects]]
  from = "/stazioni.json"
  to = "/404"
  status = 404
  force = true
